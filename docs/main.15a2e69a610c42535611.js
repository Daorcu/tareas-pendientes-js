(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(a,'__esModule',{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&'object'==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,'default',{enumerable:!0,value:a}),2&c&&'string'!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=1)})([function(){},function(a,b,c){'use strict';function d(c,a){if(!(c instanceof a))throw new TypeError('Cannot call a class as a function')}function e(e,a){for(var b,c=0;c<a.length;c++)b=a[c],b.enumerable=b.enumerable||!1,b.configurable=!0,'value'in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}function f(d,a,b){return a&&e(d.prototype,a),b&&e(d,b),d}function g(i,a){var b;if('undefined'==typeof Symbol||null==i[Symbol.iterator]){if(Array.isArray(i)||(b=h(i))||a&&i&&'number'==typeof i.length){b&&(i=b);var c=0,d=function(){};return{s:d,n:function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}},e:function(b){throw b},f:d}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var j,f=!0,g=!1;return{s:function(){b=i[Symbol.iterator]()},n:function(){var c=b.next();return f=c.done,c},e:function(b){g=!0,j=b},f:function a(){try{f||null==b['return']||b['return']()}finally{if(g)throw a}}}}function h(d,e){if(d){if('string'==typeof d)return i(d,e);var b=Object.prototype.toString.call(d).slice(8,-1);return'Object'===b&&d.constructor&&(b=d.constructor.name),'Map'===b||'Set'===b?Array.from(d):'Arguments'===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?i(d,e):void 0}}function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var b=0,c=Array(a);b<a;b++)c[b]=e[b];return c}function j(c,a){if(!(c instanceof a))throw new TypeError('Cannot call a class as a function')}function k(e,a){for(var b,c=0;c<a.length;c++)b=a[c],b.enumerable=b.enumerable||!1,b.configurable=!0,'value'in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}function l(d,a,b){return a&&k(d.prototype,a),b&&k(d,b),d}function m(i,a){var b;if('undefined'==typeof Symbol||null==i[Symbol.iterator]){if(Array.isArray(i)||(b=n(i))||a&&i&&'number'==typeof i.length){b&&(i=b);var c=0,d=function(){};return{s:d,n:function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}},e:function(b){throw b},f:d}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var j,f=!0,g=!1;return{s:function(){b=i[Symbol.iterator]()},n:function(){var c=b.next();return f=c.done,c},e:function(b){g=!0,j=b},f:function a(){try{f||null==b['return']||b['return']()}finally{if(g)throw a}}}}function n(d,e){if(d){if('string'==typeof d)return o(d,e);var b=Object.prototype.toString.call(d).slice(8,-1);return'Object'===b&&d.constructor&&(b=d.constructor.name),'Map'===b||'Set'===b?Array.from(d):'Arguments'===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?o(d,e):void 0}}function o(e,a){(null==a||a>e.length)&&(a=e.length);for(var b=0,c=Array(a);b<a;b++)c[b]=e[b];return c}c.r(b),c.d(b,'todoList',function(){return z});var p=c(0),q=function(){function h(a){d(this,h),this.tarea=a,this.id=new Date().getTime(),this.completado=!1,this.creado=new Date}return f(h,null,[{key:'fromJson',value:function(a){var b=a.id,c=a.tarea,d=a.completado,e=a.creado,f=new h(c);return f.id=b,f.completado=d,f.creado=e,f}}]),h}(),r=function(){function b(){j(this,b),this.cargarLocalStorage()}return l(b,[{key:'nuevoTodo',value:function(b){this.todos.push(b),this.guardarLocalStorage()}},{key:'eliminarTodo',value:function(c){this.todos=this.todos.filter(function(a){return a.id!=c}),this.guardarLocalStorage()}},{key:'marcarCompletado',value:function(e){var a,b=g(this.todos);try{for(b.s();!(a=b.n()).done;){var c=a.value;if(c.id==e){c.completado=!c.completado,this.guardarLocalStorage();break}}}catch(c){b.e(c)}finally{b.f()}}},{key:'eliminarCompletados',value:function(){this.todos=this.todos.filter(function(b){return!b.completado}),this.guardarLocalStorage()}},{key:'guardarLocalStorage',value:function(){localStorage.setItem('todo',JSON.stringify(this.todos))}},{key:'cargarLocalStorage',value:function(){this.todos=localStorage.getItem('todo')?JSON.parse(localStorage.getItem('todo')):[],this.todos=this.todos.map(q.fromJson)}}]),b}(),s=document.querySelector('.todo-list'),t=document.querySelector('.new-todo'),u=document.querySelector('.clear-completed'),v=document.querySelector('.filters'),w=document.querySelectorAll('.filtro'),x=document.querySelector('strong'),y=function(d){var a='\n    <li class="'.concat(d.completado?'completed':'','" data-id="').concat(d.id,'">\n        <div class="view">\n            <input class="toggle" type="checkbox" ').concat(d.completado?'checked':'','>\n            <label>').concat(d.tarea,'</label>\n            <button class="destroy"></button>\n        </div>\n        <input class="edit" value="Create a TodoMVC template">\n    </li>'),b=document.createElement('div');return b.innerHTML=a,s.append(b.firstElementChild),b.firstElementChild};t.addEventListener('keyup',function(c){if(13===c.keyCode&&0<t.value.length){var a=new q(t.value);z.nuevoTodo(a),y(a),t.value=''}}),s.addEventListener('click',function(e){var a=e.target.localName,b=e.target.parentElement.parentElement,c=b.getAttribute('data-id');a.includes('input')?(z.marcarCompletado(c),b.classList.toggle('completed')):a.includes('button')&&(z.eliminarTodo(c),s.removeChild(b))}),u.addEventListener('click',function(){z.eliminarCompletados();for(var c,a=s.children.length-1;0<=a;a--)c=s.children[a],c.classList.contains('completed')&&s.removeChild(c)}),v.addEventListener('click',function(g){var a=g.target.text;if(a){w.forEach(function(b){return b.classList.remove('selected')}),g.target.classList.add('selected');var b,c=m(s.children);try{for(c.s();!(b=c.n()).done;){var d=b.value;d.classList.remove('hidden');var e=d.classList.contains('completed');'Pendientes'===a?e&&d.classList.add('hidden'):'Realizados'===a?e||d.classList.add('hidden'):void 0}}catch(b){c.e(b)}finally{c.f()}}});var z=new r;z.todos.forEach(function(b){return y(b)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzZXMvdG9kby5jbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2xhc3Nlcy90b2RvLWxpc3QuY2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJEYXRlIiwiaWQiLCJ0YXJlYSIsImNvbXBsZXRhZG8iLCJjcmVhZG8iLCJ0ZW1wVG9kbyIsInRvZG8iLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwiVG9kbyIsImRpdlRvZG9MaXN0IiwiZG9jdW1lbnQiLCJ0eHRJbnB1dCIsImJ0bkJvcnJhckMiLCJmaWx0cm9zIiwiYW5jaG9yRmlsdHJvcyIsInRhcmVhc1BlbmQiLCJjcmVhclRvZG9IdG1sIiwiaHRtbFRvZG8iLCJkaXYiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIm51ZXZvVG9kbyIsInRvZG9MaXN0Iiwibm9tYnJlRWxlbWVudG8iLCJldmVudCIsInRvZG9FbGVtZW50byIsInRvZG9JZCIsImkiLCJlbGVtZW50byIsImZpbHRybyIsImVsZW0iXSwibWFwcGluZ3MiOiJhQUlBLGNBR0EsUUFDQSxvQkFHQSxZQUNBLEdBREEsQ0FFQSxJQUZBLENBR0EsVUFIQSxFQWFBLE1BTkEsbUNBTUEsQ0FIQSxNQUdBLFVBQ0EsQ0F4QkEsU0FpRkEsTUFyREEsTUFxREEsQ0FsREEsS0FrREEsQ0EvQ0Esb0JBQ0EsUUFEQSxFQUVBLDJCQUEwQyxhQUExQyxDQUEwQyxLQUExQyxFQUVBLENBMkNBLENBeENBLGdCQUNBLDhDQURBLEVBRUEsNENBQXdELGNBQXhELEVBRkEsQ0FJQSxzQ0FBaUQsUUFBakQsRUFDQSxDQW1DQSxDQTVCQSxrQkFFQSxHQURBLEdBQ0EsR0FEQSxNQUNBLGVBQ0EscURBQ0EsMEJBR0EsR0FGQSxNQUVBLENBREEsbUNBQXlDLGFBQXpDLENBQXlDLE9BQXpDLEVB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SyxFQUFJakIsa0JBQWIsYUFFcUJBLEVBRnJCLFFBRXFCQSxHQUZyQixDQUlRa0IscUJBSlIsV0FJUUEsR0FDQWxCLGdCQVJaRyxFQTVCQUQsQ0EyQ0EsMkJBQWtDLFdBQWEsQ0FFM0MsR0FBTWlCLEdBQVNMLFNBQWYsS0FDQSxNQUlBVCxVQUF1QixXQUFJLE9BQUllLG9CQUFKLFVBQUlBLENBSi9CLENBSUFmLEVBQ0FTLHVCQUxBLFVBS0FBLENBTEEsV0FPdUJkLEVBUHZCLGNBT0EsMkJBQThDLENBQW5Da0IsTUFBbUMsT0FBbkNBLENBRVBBLG1CQUYwQyxRQUUxQ0EsQ0FGMEMsQ0FHMUMsR0FBTXpCLEdBQWF5QixxQkFBbkIsV0FBbUJBLENBQW5CLENBSDBDLG9CQVE5QkEsZ0JBUjhCLFFBUTlCQSxDQVI4QixxQkFlOUJBLGdCQWY4QixRQWU5QkEsQ0FmOEIsT0FQOUMsZ0NBQ0EsQ0FKSixFLENDckVPLEdBQU1OLEdBQU4sTUFFUEEsZ0JBQXdCLFdBQUksWUFBNUJBLEUiLCJmaWxlIjoibWFpbi4xNWEyZTY5YTYxMGM0MjUzNTYxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIlxuZXhwb3J0IGNsYXNzIFRvZG8ge1xuXG4gICAgc3RhdGljIGZyb21Kc29uKHsgaWQsIHRhcmVhLCBjb21wbGV0YWRvLCBjcmVhZG8gfSkge1xuXG4gICAgICAgIGNvbnN0IHRlbXBUb2RvID0gbmV3IFRvZG8odGFyZWEpO1xuXG4gICAgICAgIHRlbXBUb2RvLmlkICAgICAgICAgPSBpZDtcbiAgICAgICAgdGVtcFRvZG8uY29tcGxldGFkbyA9IGNvbXBsZXRhZG87XG4gICAgICAgIHRlbXBUb2RvLmNyZWFkbyAgICAgPSBjcmVhZG87XG5cbiAgICAgICAgcmV0dXJuIHRlbXBUb2RvO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yICggdGFyZWEgKSB7XG5cbiAgICAgICAgdGhpcy50YXJlYSA9IHRhcmVhO1xuICAgICAgICB0aGlzLmlkICAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuY29tcGxldGFkbyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNyZWFkbyAgICAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgfVxuLy9cbi8vICAgIGltcHJpbWlyQ2xhc2UoKSB7XG4vLyAgICAgICAgY29uc29sZS5sb2coYCR7IHRoaXMudGFyZWEgfSAtICR7IHRoaXMuaWR9IC0gJHsgdGhpcy5jb21wbGV0YWRvfSBgKTtcbi8vICAgIH1cbn0iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vdG9kby5jbGFzc1wiO1xuXG5leHBvcnQgY2xhc3MgVG9kb0xpc3Qge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vdGhpcy50b2RvcyA9IFtdO1xuICAgICAgICB0aGlzLmNhcmdhckxvY2FsU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIG51ZXZvVG9kbyggdG9kbyApIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKCB0b2RvICk7XG4gICAgICAgIHRoaXMuZ3VhcmRhckxvY2FsU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIGVsaW1pbmFyVG9kbyggaWQgKSB7XG5cbiAgICAgICAgdGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKCB0b2RvID0+IHRvZG8uaWQgIT0gaWQgKVxuICAgICAgICB0aGlzLmd1YXJkYXJMb2NhbFN0b3JhZ2UoKTtcblxuICAgIH1cblxuICAgIG1hcmNhckNvbXBsZXRhZG8oIGlkICkge1xuXG4gICAgICAgIGZvcihjb25zdCB0b2RvIG9mIHRoaXMudG9kb3MgKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCBpZCwgdG9kby5pZCwgdG9kby5jb21wbGV0YWRvICk7XG5cbiAgICAgICAgICAgIGlmICggdG9kby5pZCA9PSBpZCApIHtcbiAgICAgICAgICAgICAgICB0b2RvLmNvbXBsZXRhZG8gPSAhdG9kby5jb21wbGV0YWRvO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ndWFyZGFyTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGVsaW1pbmFyQ29tcGxldGFkb3MoKSB7XG5cbiAgICAgICAgdGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKCB0b2RvID0+ICF0b2RvLmNvbXBsZXRhZG8gKVxuICAgICAgICB0aGlzLmd1YXJkYXJMb2NhbFN0b3JhZ2UoKTtcblxuICAgIH1cblxuICAgIGd1YXJkYXJMb2NhbFN0b3JhZ2UoKSB7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8nLCBKU09OLnN0cmluZ2lmeSggdGhpcy50b2RvcyApKTtcblxuICAgIH1cblxuICAgIGNhcmdhckxvY2FsU3RvcmFnZSgpIHtcblxuICAgICAgICB0aGlzLnRvZG9zID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBKU09OLnBhcnNlKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kbycpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICB0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5tYXAoIFRvZG8uZnJvbUpzb24pO1xuICAgIH1cblxuICAgIFxuICAgICAgXG59XG4iLCJcbmltcG9ydCB7VG9kb30gZnJvbSAnLi4vY2xhc3Nlcyc7XG5pbXBvcnQge3RvZG9MaXN0fSBmcm9tICcuLi9pbmRleCc7XG5cbi8vIFJlZmVyZW5jaWFzIGVuIGVsIEhUTUxcbmNvbnN0IGRpdlRvZG9MaXN0ICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0Jyk7XG5jb25zdCB0eHRJbnB1dCAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvJyk7XG5jb25zdCBidG5Cb3JyYXJDICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsZWFyLWNvbXBsZXRlZCcpO1xuY29uc3QgZmlsdHJvcyAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJyk7XG5jb25zdCBhbmNob3JGaWx0cm9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRybycpO1xuY29uc3QgdGFyZWFzUGVuZCAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0cm9uZycpO1xuXG5cbmV4cG9ydCBjb25zdCBjcmVhclRvZG9IdG1sID0gKCB0b2RvICkgPT4ge1xuXG4gICAgY29uc3QgaHRtbFRvZG8gPSBgXG4gICAgPGxpIGNsYXNzPVwiJHsodG9kby5jb21wbGV0YWRvKSA/ICdjb21wbGV0ZWQnIDogJyd9XCIgZGF0YS1pZD1cIiR7KHRvZG8uaWQpfVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmlld1wiPlxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidG9nZ2xlXCIgdHlwZT1cImNoZWNrYm94XCIgJHsgKCB0b2RvLmNvbXBsZXRhZG8gKSA/ICdjaGVja2VkJyA6ICcnIH0+XG4gICAgICAgICAgICA8bGFiZWw+JHsgdG9kby50YXJlYSB9PC9sYWJlbD5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkZXN0cm95XCI+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJlZGl0XCIgdmFsdWU9XCJDcmVhdGUgYSBUb2RvTVZDIHRlbXBsYXRlXCI+XG4gICAgPC9saT5gO1xuICAgIFxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSBodG1sVG9kbztcbiAgICBkaXZUb2RvTGlzdC5hcHBlbmQoIGRpdi5maXJzdEVsZW1lbnRDaGlsZCApO1xuICAgIHJldHVybiBkaXYuZmlyc3RFbGVtZW50Q2hpbGQ7XG59XG5cbi8vIEV2ZW50b3MgXG50eHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICggZXZlbnQpID0+IHtcblxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMyAmJiB0eHRJbnB1dC52YWx1ZS5sZW5ndGggPiAwICkge1xuICAgICAgICBjb25zdCBudWV2b1RvZG8gPSBuZXcgVG9kbyggdHh0SW5wdXQudmFsdWUpO1xuICAgICAgICB0b2RvTGlzdC5udWV2b1RvZG8oIG51ZXZvVG9kbyApO1xuICAgICAgICBjcmVhclRvZG9IdG1sKCBudWV2b1RvZG8gKTtcbiAgICAgICAgdHh0SW5wdXQudmFsdWUgPSAnJzsgICAgfVxufSk7XG5cbmRpdlRvZG9MaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG5cbiAgICBjb25zdCBub21icmVFbGVtZW50byA9IGV2ZW50LnRhcmdldC5sb2NhbE5hbWU7IC8vIGlucHV0LCBsYWJlbCwgYnV0dG9uXG4gICAgY29uc3QgdG9kb0VsZW1lbnRvICAgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHRvZG9JZCAgICAgICAgID0gdG9kb0VsZW1lbnRvLmdldEF0dHJpYnV0ZSggJ2RhdGEtaWQnICk7XG5cblxuICAgIGlmICggbm9tYnJlRWxlbWVudG8uaW5jbHVkZXMoJ2lucHV0JykpIHsgLy8gQ3VhbmRvIHNlIG1hcmNhIGVsIGNoZWNrXG4gICAgICAgIHRvZG9MaXN0Lm1hcmNhckNvbXBsZXRhZG8oIHRvZG9JZCApO1xuICAgICAgICB0b2RvRWxlbWVudG8uY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XG4gICAgICAgIFxuICAgIH0gZWxzZSBpZiAoIG5vbWJyZUVsZW1lbnRvLmluY2x1ZGVzKCdidXR0b24nKSkgeyAvLyBJbmRpY2FjacOzbiBwYXJhIGJvcnJhciB0YXJlYVxuXG4gICAgICAgIHRvZG9MaXN0LmVsaW1pbmFyVG9kbyggdG9kb0lkICk7XG4gICAgICAgIGRpdlRvZG9MaXN0LnJlbW92ZUNoaWxkKCB0b2RvRWxlbWVudG8gKTtcblxuICAgIH1cbn0pO1xuXG5idG5Cb3JyYXJDLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHRvZG9MaXN0LmVsaW1pbmFyQ29tcGxldGFkb3MoKTtcbiAgICBcbiAgICBmb3IoIGxldCBpID0gZGl2VG9kb0xpc3QuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tICkge1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRvID0gZGl2VG9kb0xpc3QuY2hpbGRyZW5baV07XG5cbiAgICAgICAgaWYoIGVsZW1lbnRvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcbiAgICAgICAgICAgIGRpdlRvZG9MaXN0LnJlbW92ZUNoaWxkKGVsZW1lbnRvKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KTtcblxuZmlsdHJvcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICggZXZlbnQpICA9PiB7XG5cbiAgICBjb25zdCBmaWx0cm8gPSBldmVudC50YXJnZXQudGV4dDtcbiAgICBpZiggIWZpbHRybyApIHsgcmV0dXJuOyB9XG4gICAgLy9jb25zb2xlLmxvZyhmaWx0cm8pXG5cblxuICAgIGFuY2hvckZpbHRyb3MuZm9yRWFjaCggZWxlbSA9PiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuXG4gICAgZm9yKCBjb25zdCBlbGVtZW50byBvZiBkaXZUb2RvTGlzdC5jaGlsZHJlbiApIHtcblxuICAgICAgICBlbGVtZW50by5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgY29uc3QgY29tcGxldGFkbyA9IGVsZW1lbnRvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJyk7XG4gICAgICBcbiAgICAgICAgc3dpdGNoICggZmlsdHJvICkge1xuICAgICAgICAgICAgY2FzZSAnUGVuZGllbnRlcyc6XG4gICAgICAgICAgICAgICAgaWYoIGNvbXBsZXRhZG8gKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbXBsZXRhZG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdSZWFsaXphZG9zJzpcbiAgICAgICAgICAgICAgICBpZiggIWNvbXBsZXRhZG8gKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pO1xuXG4vL1RPRE86XG4vL3RhcmVhc1BlbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbi8vICAgIFxuLy8gICAgY29uc3QgcGVuZGllbnRlcyA9IGVsZW1lbnRvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJyk7XG4vLyAgICBcbi8vICAgIGlmICggcGVuZGllbnRlcyA8PSAwICkge1xuLy8gICAgICAgIHBucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0cm9uZycpLmlubmVyVGV4dCArIGNvbXBsZXRhZG8ubGVuZ3RoO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xuLy8gICAgICAgIHJldHVybiAocG5zKTtcbi8vICAgIH1cbi8vfSk7IiwiXG5pbXBvcnQgJy4vc3R5bGVzLmNzcyc7XG5cbmltcG9ydCB7IFRvZG8sIFRvZG9MaXN0fSBmcm9tICcuL2NsYXNzZXMnO1xuaW1wb3J0IHsgY3JlYXJUb2RvSHRtbCB9IGZyb20gJy4vanMvY29tcG9uZW50ZXMnO1xuXG5leHBvcnQgY29uc3QgdG9kb0xpc3QgPSBuZXcgVG9kb0xpc3QoKTtcblxudG9kb0xpc3QudG9kb3MuZm9yRWFjaCggdG9kbyA9PiBjcmVhclRvZG9IdG1sICggdG9kbyApKTtcblxuLy9jb25zdCBuZXdUb2RvID0gbmV3IFRvZG8oJ0FsZ28nKTtcblxuLy90b2RvTGlzdC50b2Rvc1swXS5pbXByaW1pckNsYXNlKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==